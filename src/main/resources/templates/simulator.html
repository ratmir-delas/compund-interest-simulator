<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.75, maximum-scale=1.5, user-scalable=yes">
    <title data-lang-key="title"></title>
    <link rel="icon" href="/assets/img/budget.png">
    <!-- Links para folhas de estilo externas -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta.3/css/bootstrap.css">
    <link rel="stylesheet" href="/assets/css/simulator.css?v=1">
</head>
<body>

    <h2 id="title-simulator" data-lang-key="title"></h2>

    <div id="container-simulator">
        <!-- Seção de gráfico -->
        <div id="container-graphic">
            <div id="sub-container-graphic" class="text-center">
                <div data-lang-key="futureBalance"></div>
                <div class="h3" id="future_balance">?</div>
                <canvas id="myChart"></canvas>
            </div>
            <div id="container-export">
                <button id="btn-export-csv" class="btn btn-primary">&DownArrowBar; <span data-lang-key="exportData"></span></button>
            </div>
        </div>

        <!-- Seção de formulário -->
        <div id="container-form">
            <div id="sub-container-form">
                <!-- Grupo de formulário para o depósito inicial -->
                <div class="form-group mb-4">
                    <label for="initial_deposit" data-lang-key="initialDeposit"></label>
                    <div class="">
                        <!-- Input com botões para aumentar ou diminuir o valor -->
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <button class="btn btn-primary" type="button" data-counter="sub" data-field="initial_deposit">&minus;</button>
                            </div>
                            <input class="form-control text-center" id="initial_deposit" type="text" name="initial_deposit" min="100" max="1000000" step="100" value="5000€" data-value="5000" data-prepend="">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" data-counter="add" data-field="initial_deposit">&plus;</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Grupo de formulário para as contribuições -->
                <div class="form-group">
                    <label for="contribution_amount" data-lang-key="contributions">Contribuições</label>
                    <div class="">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <button class="btn btn-primary" type="button" data-counter="sub" data-field="contribution_amount">&minus;</button>
                            </div>
                            <input class="form-control text-center" id="contribution_amount" type="text" name="contribution_amount" min="0" max="10000" step="50" value="100€" data-value="100" data-prepend="">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" data-counter="add" data-field="contribution_amount">&plus;</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="contribution_period_annually" type="radio" name="contribution_period" value="1" checked>
                        <label class="form-check-label" for="contribution_period_annually" data-lang-key="annual"></label>
                    </div>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="contribution_period_monthly" type="radio" name="contribution_period" value="12">
                        <label class="form-check-label" for="contribution_period_monthly" data-lang-key="monthly"></label>
                    </div>

                </div>

                <!-- Grupo de formulário para a duração do investimento -->
                <div class="form-group">
                    <label for="investment_timespan" data-lang-key="investmentDuration"></label>
                    <div class="">
                        <div class="">
                            <input class="form-control" id="investment_timespan" type="range" name="investment_timespan" min="2" max="50" step="1" value="5">
                        </div>
                    </div>
                    <span id="investment_timespan_text">5</span> <span data-lang-key="years"></span>
                </div>

                <!-- Group form for estimated return tax -->
                <div class="form-group">
                    <label for="estimated_return" data-lang-key="estimatedReturn"></label>
                    <div class="">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <button class="btn btn-primary" type="button" data-counter="sub" data-field="estimated_return">&minus;</button>
                            </div>
                            <input class="form-control text-center" id="estimated_return" type="text" name="estimated_return" min="0" max="50" step="0.25" value="8%" data-value="8.00" data-append="%">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" data-counter="add" data-field="estimated_return">&plus;</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Group form for estimated tax -->
                <div class="form-group">
                    <label for="estimated_tax" data-lang-key="estimatedTax"></label>
                    <div class="">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <button class="btn btn-primary" type="button" data-counter="sub" data-field="estimated_tax">&minus;</button>
                            </div>
                            <input class="form-control text-center" id="estimated_tax" type="text" name="estimated_tax" min="0" max="50" step="0.25" value="20%" data-value="20.00" data-append="%">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" data-counter="add" data-field="estimated_tax">&plus;</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Group form for estimated inflation rate -->
                <div class="form-group">
                    <label for="estimated_inflation" data-lang-key="estimatedInflation"></label>
                    <div class="">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <button class="btn btn-primary" type="button" data-counter="sub" data-field="estimated_inflation">&minus;</button>
                            </div>
                            <input class="form-control text-center" id="estimated_inflation" type="text" name="estimated_inflation" min="0" max="50" step="0.25" value="6%" data-value="6.00" data-append="%">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" data-counter="add" data-field="estimated_inflation">&plus;</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Grupo de formulário para a frequência da capitalização -->
                <div class="form-group">
                    <div class="">
                        <label data-lang-key="capitalizationFrequency"></label> <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" id="compound_period_annually" type="radio" name="compound_period" value="1">
                            <label class="form-check-label" data-lang-key="annual" for="compound_period_annually"></label>
                        </div>

                        <div class="form-check form-check-inline">
                            <input class="form-check-input" id="compound_period_monthly" type="radio" name="compound_period" value="12" checked>
                            <label class="form-check-label" data-lang-key="monthly" for="compound_period_monthly"></label>
                        </div>

                        <div class="form-check form-check-inline">
                            <input class="form-check-input" id="compound_period_daily" type="radio" name="compound_period" value="365">
                            <label class="form-check-label" data-lang-key="daily" for="compound_period_daily"></label>
                        </div>
                    </div>
                </div>

                <!-- Grupo de formulário para limpar e reinciar -->
                <div class="form-group">
                    <div class="input-group">
                        <button id="button-reset" class="btn btn-primary btn-wide">&#x21bb; <span data-lang-key="resetButton"></span></button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="input-group">
                        <button id="button-save" class="btn btn-primary btn-wide">&#128427; <span data-lang-key="saveCalculation"></span></button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="container-history" style="margin-top: 50px">
        <div id="sub-container-history">
            <div id="history">
                <div id="history-title">
                    <h2 data-lang-key="history">Histórico</h2>
                </div>
                <div id="history-content">
                    <div id="history-content-table">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th scope="col" data-lang-key="investmentDuration">Duração</th>
                                    <th scope="col" data-lang-key="initialDeposit">Depósito Inicial</th>
                                    <th scope="col" data-lang-key="contributions">Contribuições</th>
                                    <th scope="col" data-lang-key="interest">Juros</th>
                                    <th scope="col" data-lang-key="estimatedTax">Impostos Estimados</th>
                                    <th scope="col" data-lang-key="estimatedInflation">Inflção Estimada</th>
                                    <th scope="col" data-lang-key="futureBalance">Saldo Final</th>
                                    <th scope="col" data-lang-key="action">Ação</th>
                                </tr>
                            </thead>
                            <tbody id="history-content-table-body">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- External scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/assets/js/cookies.js"></script>
    <script src="/assets/js/simulator.js"></script>
    <script src="/assets/js/internationalisation/pages-translation/simulator.js"></script>
    <script>
        let language = "pt";
        if (getCookie("userInfo") !== "") {
            language = JSON.parse(getCookie("userInfo")).language;
        } else if (getCookie("language") !== "") {
            language = getCookie("language");
        }
        initializeInvestmentSimulator(translations[language]);
    </script>
    <script src="/assets/js/internationalisation/change.js"></script>
</body>
</html>